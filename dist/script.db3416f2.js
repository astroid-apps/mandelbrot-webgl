parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"sk9w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IJ=exports.XY=void 0;var e=function(e,t,r){return{x:e.a*t+e.c*r+e.e,y:e.b*t+e.d*r+e.f}},t=function(t,r,s){var a=t.getTransform().invertSelf(),n=e(a,r.si,r.sj),i=e(a,r.ei,r.ej);if(null!=s){var l=e(a,s.si,s.sj),x=e(a,s.ei,s.ej);t.translate(i.x,i.y);var o=l.x-n.x,j=l.y-n.y,y=x.x-i.x,f=x.y-i.y,u=1/(o*o+j*j),v=y*o+f*j,d=f*o-y*j;t.transform(v*u,d*u,-d*u,v*u,0,0),t.translate(-i.x,-i.y),t.translate(i.x-n.x,i.y-n.y)}else t.translate(i.x-n.x,i.y-n.y)};exports.XY=t;var r=function(e,t,r){if(null!=r){e.translate(t.ei,t.ej);var s=r.si-t.si,a=r.sj-t.sj,n=r.ei-t.ei,i=r.ej-t.ej,l=1/(s*s+a*a),x=n*s+i*a,o=i*s-n*a;e.transform(x*l,o*l,-o*l,x*l,0,0),e.translate(-t.ei,-t.ej),e.translate(t.di,t.dj)}else e.translate(t.di,t.dj)};exports.IJ=r;
},{}],"I4KE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawCenter=void 0;var e=function(e,r,o,t){e.save(),e.resetTransform();var s=.5*o,n=.5*t;e.lineWidth=1,e.beginPath(),e.moveTo(s-r,n),e.lineTo(s+r,n),e.moveTo(s,n-r),e.lineTo(s,n+r),e.closePath(),e.stroke(),e.restore()};exports.drawCenter=e;
},{}],"FO3P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PointerController=void 0;var e=function(e,t,n){var o=[];e.addEventListener("pointerdown",function(e){o.push({id:e.pointerId,si:e.offsetX,sj:e.offsetY,ei:e.offsetX,ej:e.offsetY})});e.addEventListener("pointermove",function(e){t(o),function(e){if(0!=o.length){var t=o.find(function(t){return t.id==e.pointerId});t.ei=e.offsetX,t.ej=e.offsetY,t.di=e.offsetX-t.si,t.dj=e.offsetY-t.sj}}(e)});var i=function(e){n(o),o=[]};window.addEventListener("pointerup",i),window.addEventListener("pointercancel",i),this.reset=function(){o.forEach(function(e){e.si=e.ei,e.sj=e.ej,e.di=0,e.dj=0})}};exports.PointerController=e;
},{}],"tjbw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Viewer=void 0;var e=a(require("./pinchTransform.js")),t=require("./drawCenter.js"),r=require("./PointerController.js");function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}var i=function(n,a,i,o){"min"in a.x||(a.x.min=void 0),"max"in a.x||(a.x.max=void 0),"min"in a.y||(a.y.min=void 0),"max"in a.y||(a.y.max=void 0);var l=n.clientWidth,s=n.clientHeight,c=document.createElement("canvas");c.width=l,c.height=s,c.style.cursor="move",c.style.touchAction="none",n.appendChild(c);var f=c.getContext("2d");f.fillStyle="rgba(255,255,255,1.0)",f.strokeStyle="rgba(255,255,255,1.0)",f.translate(.5*l,.5*s),f.scale(a.scale.init,-a.scale.init),f.translate(-a.x.init,-a.y.init);var u=f.getTransform(),m=f.getTransform().invertSelf(),x=function(){u=f.getTransform(),m=f.getTransform().invertSelf()},d=function(e,t){return{x:m.a*e+m.c*t+m.e,y:m.b*e+m.d*t+m.f}},v=function(){x();var e=d(.5*l,.5*s),t=e.x,r=e.y;null!=a.x.min&&t<a.x.min&&(t=a.x.min),null!=a.x.max&&t>a.x.max&&(t=a.x.max),null!=a.y.min&&r<a.y.min&&(r=a.y.min),null!=a.y.max&&r>a.y.max&&(r=a.y.max),f.translate(e.x-t,e.y-r)},y=function(e){x();var t=Math.sqrt(u.a*u.a+u.b*u.b),r=1;t>a.scale.max&&(r=a.scale.max/t),t<a.scale.min&&(r=a.scale.min/t),f.translate(e.x,e.y),f.scale(r,r),f.translate(-e.x,-e.y)};new r.PointerController(c,function(e){1==e.length?b(e[0]):2==e.length&&b(e[0],e[1])},function(t){if(1==t.length)e.XY(f,t[0]);else if(2==t.length){e.XY(f,t[0],t[1]);var r=.5*(t[0].si+t[1].si),n=.5*(t[0].sj+t[1].sj);x(),y(d(r,n))}v(),w()});c.addEventListener("wheel",function(e){x();var t=d(e.offsetX,e.offsetY),r=e.deltaY<0?1.4:1/1.4;f.translate(t.x,t.y),f.scale(r,r),f.translate(-t.x,-t.y),y(t),v(),w()});var g=function(){var e=.5*l,t=.5*s,r=f.getTransform().invertSelf(),n=r.a*e+r.c*t+r.e,a=r.b*e+r.d*t+r.f,i=1/Math.sqrt(r.a*r.a+r.b*r.b);o("X="+n.toFixed(8)+"<br>Y="+a.toFixed(8)+"<br>Scale="+i.toFixed(1)+"[px/1]")},p=document.createElement("canvas");p.width=l,p.height=s;var h=p.getContext("2d"),b=function(r,n){f.save(),f.resetTransform(),f.clearRect(0,0,l,s),e.IJ(f,r,n),f.drawImage(p,0,0,l,s,0,0,l,s),f.restore(),(0,t.drawCenter)(f,10,l,s),f.save(),e.XY(f,r,n),g(),f.restore()},w=function(){f.save(),f.resetTransform(),f.clearRect(0,0,l,s),f.restore(),i(f,l,s,d),h.clearRect(0,0,l,s),h.drawImage(c,0,0),(0,t.drawCenter)(f,10,l,s),g()};w()};exports.Viewer=i;
},{"./pinchTransform.js":"sk9w","./drawCenter.js":"I4KE","./PointerController.js":"FO3P"}],"vRgL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mandelbrot=void 0;var t=function(t,e,r){var n=document.createElement("canvas");n.width=t,n.height=e;var a=n.getContext("webgl"),i=a.createShader(a.VERTEX_SHADER);a.shaderSource(i,"\n\t\tattribute vec2 vij;\n\t\tattribute vec2 vxy;\n\n\t\t//フラグメントシェーダーに渡す頂点のXY座標(フラグメントシェーダーでは各ピクセル位置の座標に内挿された値が与えられる)\n\t\tvarying vec2 xy;\n\n\t\tvoid main(){\n\t\t\txy = vxy;\n\t\t\tgl_Position = vec4(vij, 0.0, 1.0);\n\t\t}\n\t"),a.compileShader(i);var o=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(o,"\n//\t\tprecision mediump float;\n\t\tprecision highp float;\n\n\t\t//バーテックスシェーダーから渡される値(各ピクセル位置のXY座標)\n\t\tvarying vec2 xy;\n\n\t\tint md(float x,float y){\n\t\t\tvec2 z = vec2(0.0, 0.0);\n\n\t\t\tfor(int i=0;i<500;i++){\n\t\t\t\tz = vec2(z.x * z.x - z.y * z.y + x, z.x * z.y * 2.0 + y);\n\n\t\t\t\tif(length(z) > 10.0) return i;\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t}\n\n\t\tvoid main(){\n\t\t\tfloat n = float(md(xy.x,xy.y));\n\t\t\tgl_FragColor = vec4(sin(n / 20.0), sin(n / 20.0), sin(n / 10.0), 1.0);\n\t\t}\n\t"),a.compileShader(o);var v=a.createProgram();a.attachShader(v,i),a.attachShader(v,o),a.linkProgram(v),a.useProgram(v);var c=a.getAttribLocation(v,"vij");a.enableVertexAttribArray(c),a.bindBuffer(a.ARRAY_BUFFER,a.createBuffer()),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,1,1]),a.STATIC_DRAW),a.vertexAttribPointer(c,2,a.FLOAT,!1,0,0);var A=a.getAttribLocation(v,"vxy");return a.enableVertexAttribArray(A),a.bindBuffer(a.ARRAY_BUFFER,a.createBuffer()),a.bufferData(a.ARRAY_BUFFER,new Float32Array([r.bl.x,r.bl.y,r.tl.x,r.tl.y,r.br.x,r.br.y,r.tr.x,r.tr.y]),a.STATIC_DRAW),a.vertexAttribPointer(A,2,a.FLOAT,!1,0,0),a.drawArrays(a.TRIANGLE_STRIP,0,4),n};exports.mandelbrot=t;
},{}],"mpVp":[function(require,module,exports) {
"use strict";var e=require("./Viewer.js"),r=require("./mandelbrot.js"),t=new e.Viewer(document.getElementById("viewer"),{x:{init:-.5,min:-2,max:1},y:{init:0,min:-1.5,max:1.5},scale:{init:100,min:100,max:2e8}},function(e,t,n,i){var m={tl:i(0,0),tr:i(t,0),br:i(t,n),bl:i(0,n)};e.save(),e.resetTransform(),e.drawImage((0,r.mandelbrot)(t,n,m),0,0),e.restore()},function(e){document.getElementById("status").innerHTML=e});
},{"./Viewer.js":"tjbw","./mandelbrot.js":"vRgL"}]},{},["mpVp"], null)
//# sourceMappingURL=script.db3416f2.js.map